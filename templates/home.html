{% extends 'base.html' %}

{% block title %}–ì–ª–∞–≤–Ω–∞—è{% endblock %}

{% block content %}

<div class="welcome-message">
    {% if username %}
        <p>–ü—Ä–∏–≤–µ—Ç, {{ username }}!</p>
    {% else %}
        <p>–í–æ–π–¥–∏—Ç–µ –∏–ª–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å, —á—Ç–æ–±—ã —Å–æ–≤–µ—Ä—à–∞—Ç—å –ø–æ–∫—É–ø–∫–∏!</p>
    {% endif %}
</div>

{% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
        {% for category, message in messages %}
            <div class="alert alert-{{ category }}">
                {{ message }}
            </div>
        {% endfor %}
    {% endif %}
{% endwith %}

{% if search_results %}
    <div class="genre-books-container">
        <h3>ü§† –ü–æ –í–∞—à–µ–º—É –∑–∞–ø—Ä–æ—Å—É –Ω–∞–π–¥–µ–Ω–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤: ü§†</h3>
        <div class="genre-books-grid">
            {% for book in search_results %}
                <a href="{{ url_for('main.book', id=book['id']) }}" class="genre-book-card-link">
                    <div class="genre-book-card">
                        <img src="{{ url_for('static', filename='images/book.png') }}" alt="{{ book['title'] }}" class="genre-book-image">
                        <div class="genre-book-details">
                            <h4 class="genre-book-title">{{ book['title'] }}</h4>
                            <p class="genre-book-genre">{{ book['genre'] }}</p>
                            <p class="genre-book-author">{{ book['author'] }}</p>
                            <p class="genre-book-price">{{ book['price'] }} ‚ÇΩ</p>
                            <p class="genre-book-description">{{ book['description'] }}</p>
                            <p class="genre-book-rating">–†–µ–π—Ç–∏–Ω–≥: {{ book['rating'] }} ‚òÖ</p>
                        </div>
                    </div>
                </a>
            {% endfor %}
        </div>
    </div>
{% endif %}

<div class="top-books-container">
    <h3>üêô –¢–û–ü-3 –∫–Ω–∏–≥–∏ –Ω–µ–¥–µ–ª–∏ üêô</h3>
    <div class="top-books-grid">
        {% for top_book in top_books %}
            <a href="/book/{{ top_book['id'] }}" class="book-card-link">
                <div class="book-card">
                    <img src="{{ url_for('static', filename='images/book.png') }}" alt="{{ top_book['title'] }}" class="book-image">
                    <div class="book-details">
                        <h4 class="book-title">{{ top_book['title'] }}</h4>
                        <p class="book-genre">{{ top_book['genre'] }}</p>
                        <p class="book-author">{{ top_book['author'] }}</p>
                        <p class="book-price">{{ top_book['price'] }} ‚ÇΩ</p>
                        <p class="book-description">{{ top_book['description'] }}</p>
                        <p class="book-rating">–†–µ–π—Ç–∏–Ω–≥: {{ top_book['rating'] }} ‚òÖ</p>
                    </div>
                </div>
            </a>
        {% endfor %}
    </div>
</div>
{% endblock %}